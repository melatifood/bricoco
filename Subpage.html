<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking Dashboard | Bricoco Intelligence</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-brown: #3E2723;
            --accent-orange: #FF6F00;
            --bg-dashboard: #F4F7F6;
            --card-bg: #FFFFFF;
            --text-dark: #263238;
            --success: #00C853;
            --warning: #FFD600;
            --danger: #D50000;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', sans-serif; }
        body { background-color: var(--bg-dashboard); color: var(--text-dark); }

        /* HEADER SEDERHANA */
        nav {
            background-color: var(--primary-brown);
            padding: 1rem 2rem;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .nav-brand { font-size: 1.2rem; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        .nav-user { font-size: 0.9rem; background: rgba(255,255,255,0.1); padding: 5px 15px; border-radius: 20px; }
        .back-link { color: #ccc; text-decoration: none; font-size: 0.9rem; margin-right: 20px; }
        .back-link:hover { color: white; }

        /* MAIN LAYOUT */
        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }

        /* ORDER HEADER INFO */
        .order-header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 5px solid var(--accent-orange);
        }
        .order-id h1 { font-size: 1.5rem; color: var(--primary-brown); }
        .order-meta { text-align: right; font-size: 0.9rem; color: #666; }
        .badge { padding: 5px 10px; border-radius: 4px; font-weight: bold; font-size: 0.8rem; }
        .badge-process { background: #E3F2FD; color: #1565C0; }

        /* PROGRESS TRACKER (Stepper) */
        .stepper-wrapper {
            background: white;
            padding: 30px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            position: relative;
        }
        .stepper-item { position: relative; display: flex; flex-direction: column; align-items: center; flex: 1; z-index: 2; }
        .stepper-item::before {
            content: ''; position: absolute; top: 15px; left: -50%; width: 100%; height: 3px;
            background-color: #e0e0e0; z-index: -1;
        }
        .stepper-item:first-child::before { content: none; }
        .step-counter {
            width: 35px; height: 35px; border-radius: 50%; background-color: #e0e0e0;
            color: #fff; display: flex; justify-content: center; align-items: center; font-weight: bold; margin-bottom: 10px;
            transition: 0.3s;
        }
        .step-name { font-size: 0.85rem; color: #999; font-weight: 500; }
        
        /* Active State */
        .stepper-item.completed .step-counter { background-color: var(--success); }
        .stepper-item.completed::before { background-color: var(--success); }
        .stepper-item.active .step-counter { background-color: var(--accent-orange); box-shadow: 0 0 0 5px rgba(255, 111, 0, 0.2); }
        .stepper-item.active .step-name { color: var(--text-dark); font-weight: bold; }

        /* DASHBOARD GRID */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        /* WIDGET CARDS */
        .card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .card-title { font-size: 0.9rem; font-weight: 600; color: #78909C; margin-bottom: 15px; display: flex; justify-content: space-between; }
        
        /* 1. SENSOR CARD STYLES */
        .sensor-value { font-size: 2.5rem; font-weight: bold; color: var(--primary-brown); }
        .sensor-unit { font-size: 1rem; color: #999; }
        .sensor-status { font-size: 0.8rem; margin-top: 5px; display: flex; align-items: center; gap: 5px; }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: #ccc; }
        .dot.green { background: var(--success); box-shadow: 0 0 5px var(--success); }
        .mini-chart { height: 40px; background: #f0f0f0; margin-top: 15px; border-radius: 4px; overflow: hidden; display: flex; align-items: flex-end; gap: 2px; }
        .bar { width: 100%; background: var(--accent-orange); opacity: 0.7; transition: height 0.5s; }

        /* 2. CCTV CARD STYLES */
        .cctv-feed {
            background: black;
            height: 200px;
            border-radius: 4px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            overflow: hidden;
        }
        .rec-badge {
            position: absolute; top: 10px; right: 10px;
            background: red; color: white; padding: 2px 8px;
            font-size: 0.7rem; border-radius: 2px;
            animation: blink 1s infinite;
        }
        .cctv-overlay {
            position: absolute; bottom: 10px; left: 10px;
            color: #0f0; font-family: monospace; font-size: 0.8rem;
            background: rgba(0,0,0,0.5); padding: 2px;
        }
        
        /* 3. LOG CARD STYLES */
        .log-list { list-style: none; height: 200px; overflow-y: auto; }
        .log-item { display: flex; gap: 10px; margin-bottom: 12px; font-size: 0.85rem; border-bottom: 1px solid #eee; padding-bottom: 8px; }
        .log-time { color: #999; min-width: 60px; font-size: 0.75rem; }
        .log-text { color: var(--text-dark); }

        /* FOOTER ACTIONS */
        .action-bar {
            margin-top: 30px;
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        .btn {
            padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: 500; transition: 0.3s;
        }
        .btn-outline { background: transparent; border: 1px solid #ccc; color: #666; }
        .btn-primary { background: var(--primary-brown); color: white; }
        .btn-primary:hover { background: #5D4037; }

        /* Responsive */
        @media (max-width: 768px) {
            .dashboard-grid { grid-template-columns: 1fr; }
            .stepper-wrapper { overflow-x: auto; }
            .step-name { font-size: 0.7rem; }
        }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body>

    <nav>
        <div class="nav-brand">
            <a href="bricoco.html" class="back-link">‚Üê Back to Home</a>
            <span>BRICOCO INTELLIGENCE SYSTEM</span>
        </div>
        <div class="nav-user">
            Logged in as: <strong>Guest Buyer (Shanghai, CN)</strong>
        </div>
    </nav>

    <div class="container">
        
        <div class="order-header">
            <div class="order-id">
                <span style="font-size: 0.8rem; color: #999; text-transform: uppercase; letter-spacing: 1px;">Tracking ID</span>
                <h1>#BRICO-001</h1>
                <p style="font-size: 0.9rem; color: var(--accent-orange);">Product: Coconut Charcoal Briquettes (Premium)</p>
            </div>
            <div class="order-meta">
                <p>Order Date: <strong>23 Nov 2025</strong></p>
                <p>Est. Shipment: <strong>30 Nov 2025</strong></p>
                <div style="margin-top: 5px;"><span class="badge badge-process">Status: Production Phase</span></div>
            </div>
        </div>

        <div class="stepper-wrapper">
            <div class="stepper-item completed">
                <div class="step-counter">‚úì</div>
                <div class="step-name">Order Confirmed</div>
            </div>
            <div class="stepper-item completed">
                <div class="step-counter">‚úì</div>
                <div class="step-name">Raw Material Sort</div>
            </div>
            <div class="stepper-item completed">
                <div class="step-counter">‚úì</div>
                <div class="step-name">Carbonization</div>
            </div>
            <div class="stepper-item active">
                <div class="step-counter">4</div>
                <div class="step-name">Oven Drying (QC)</div>
            </div>
            <div class="stepper-item">
                <div class="step-counter">5</div>
                <div class="step-name">Packaging</div>
            </div>
            <div class="stepper-item">
                <div class="step-counter">6</div>
                <div class="step-name">Shipping</div>
            </div>
        </div>

        <div class="dashboard-grid">
            
            <div class="card">
                <div class="card-title">
                    <span>LIVE MOISTURE SENSOR (Oven 2)</span>
                    <span class="dot green"></span>
                </div>
                <div class="sensor-value" id="moistureDisplay">5.24 <span class="sensor-unit">%</span></div>
                <div class="sensor-status" style="color: var(--warning);">
                    ‚ö†Ô∏è Reducing to target < 3.0%
                </div>
                <div class="mini-chart" id="moistureChart">
                    <div class="bar" style="height: 60%"></div>
                    <div class="bar" style="height: 55%"></div>
                    <div class="bar" style="height: 58%"></div>
                    <div class="bar" style="height: 52%"></div>
                    <div class="bar" style="height: 50%"></div>
                    <div class="bar" style="height: 48%"></div>
                    <div class="bar" style="height: 45%"></div> </div>
            </div>

            <div class="card">
                <div class="card-title">
                    <span>OVEN TEMPERATURE</span>
                    <span class="dot green"></span>
                </div>
                <div class="sensor-value" id="tempDisplay">85.0 <span class="sensor-unit">¬∞C</span></div>
                <div class="sensor-status" style="color: var(--success);">
                    ‚úì Optimal Temperature (Stable)
                </div>
                <div style="margin-top: 15px; font-size: 0.8rem; color: #666;">
                    <p>Heat Source: Recycled Biomass</p>
                    <p>Energy Efficiency: 94%</p>
                </div>
            </div>

            <div class="card" style="grid-column: span 1;">
                <div class="card-title">
                    <span>LIVE PRODUCTION FEED (CAM-04)</span>
                    <span>üì∂ HD</span>
                </div>
                <div class="cctv-feed">
                    <img src="https://images.unsplash.com/photo-1565193566173-0929d9956952?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Factory Oven" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.6;">
                    <div class="rec-badge">‚óè REC</div>
                    <div class="cctv-overlay">
                        LOC: OVEN_ROOM_B<br>
                        <span id="cctvTimer">00:00:00</span>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <button class="btn-outline" style="font-size: 0.7rem; padding: 4px 8px;">Switch Camera</button>
                </div>
            </div>

            <div class="card" style="grid-column: span 3;">
                <div class="card-title">
                    <span>PRODUCTION ACTIVITY LOG</span>
                    <a href="#" style="font-size: 0.8rem; color: var(--accent-orange); text-decoration: none;">Download Report PDF</a>
                </div>
                <ul class="log-list" id="logList">
                    <li class="log-item">
                        <span class="log-time">14:05</span>
                        <span class="log-text">System Auto-Check: All sensors calibrated.</span>
                    </li>
                    <li class="log-item">
                        <span class="log-time">13:30</span>
                        <span class="log-text">Batch #B-001 entered Oven Chamber 2.</span>
                    </li>
                    <li class="log-item">
                        <span class="log-time">12:15</span>
                        <span class="log-text">Mixing process completed. Binding agent (tapioca) ratio verified at 2.5%.</span>
                    </li>
                    <li class="log-item">
                        <span class="log-time">10:00</span>
                        <span class="log-text">Raw material carbonization finished. Zero waste protocol active.</span>
                    </li>
                </ul>
            </div>

        </div>

        <div class="action-bar">
            <button class="btn btn-outline" onclick="window.print()">Print Status</button>
            <button class="btn btn-primary" onclick="alert('Connecting to Manager Daffa Vian...')">Contact Factory Manager</button>
        </div>

    </div>

    <script>
        // 1. SIMULASI JAM CCTV
        setInterval(() => {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-GB');
            document.getElementById('cctvTimer').innerText = timeString;
        }, 1000);

        // 2. SIMULASI SENSOR MOISTURE & TEMP BERGERAK
        // Ini memberikan efek seolah-olah data diambil real-time dari alat
        setInterval(() => {
            // Moisture logic (Fluktuasi turun perlahan)
            let currentMoisture = parseFloat(document.getElementById('moistureDisplay').innerText);
            let noise = (Math.random() - 0.6) * 0.05; // Random noise
            let newMoisture = currentMoisture + noise;
            
            // Batasi agar tidak minus atau terlalu tinggi
            if(newMoisture < 4.5) newMoisture = 5.2; 
            if(newMoisture > 5.5) newMoisture = 5.0;

            document.getElementById('moistureDisplay').innerHTML = newMoisture.toFixed(2) + ' <span class="sensor-unit">%</span>';

            // Temp logic (Fluktuasi stabil)
            let currentTemp = 85.0;
            let tempNoise = (Math.random() - 0.5) * 0.5;
            let newTemp = currentTemp + tempNoise;
            document.getElementById('tempDisplay').innerHTML = newTemp.toFixed(1) + ' <span class="sensor-unit">¬∞C</span>';

            // Update Grafik Batang (Visual effect only)
            const bars = document.querySelectorAll('.bar');
            bars.forEach(bar => {
                // Acak tinggi batang sedikit untuk efek "live"
                let currentHeight = parseInt(bar.style.height);
                let change = Math.floor(Math.random() * 10) - 5;
                let newHeight = currentHeight + change;
                if(newHeight > 90) newHeight = 90;
                if(newHeight < 20) newHeight = 20;
                bar.style.height = newHeight + '%';
            });

        }, 2000); // Update setiap 2 detik

        // 3. LOG OTOMATIS TAMBAHAN
        setTimeout(() => {
            const logList = document.getElementById('logList');
            const newLog = document.createElement('li');
            newLog.className = 'log-item';
            newLog.style.background = "#E3F2FD"; // Highlight
            newLog.innerHTML = `
                <span class="log-time">${new Date().toLocaleTimeString('en-GB', {hour: '2-digit', minute:'2-digit'})}</span>
                <span class="log-text"><strong>LIVE UPDATE:</strong> Moisture reading updated. Deviation within standard tolerance.</span>
            `;
            logList.insertBefore(newLog, logList.firstChild);
        }, 5000);

    </script>
</body>
</html>